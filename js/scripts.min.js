var Enemy=function(a,b,c,d,e,f){"undefined"==typeof ground&&(ground=a.world),Phaser.Sprite.call(this,a,b,c,d,e+".png"),a.physics.arcade.enable(this),this.body.velocity.x=-150,this.animations.add("move",[e+".png",e+"_move.png"],5,!0),this.animations.play("move"),f.add(this)};Enemy.prototype=Object.create(Phaser.Sprite.prototype),Enemy.prototype.constructor=Enemy;var Ground=function(a,b,c,d,e){Phaser.TileSprite.call(this,a,b,c,d,e,"ground"),this.autoScroll(-150,0),this.physicsType=Phaser.SPRITE,a.physics.arcade.enableBody(this),this.body.allowGravity=!1,this.body.immovable=!0,a.world.add(this)};Ground.prototype=Object.create(Phaser.TileSprite.prototype),Ground.prototype.constructor=Ground;var Player=function(a,b,c,d,e,f){this.playerType=e,"undefined"==typeof f&&(f="walk_2"),Phaser.Sprite.call(this,a,b,c,d,e+"_"+f+".png"),a.physics.arcade.enable(this),this.body.bounce.y=.2,this.body.gravity.y=300,this.body.collideWorldBounds=!0,this.animations.add("runRight",[e+"_walk_1.png",e+"_walk_2.png"],10,!0),a.world.add(this)};Player.prototype=Object.create(Phaser.Sprite.prototype),Player.prototype.constructor=Player,Player.prototype.onGround=function(){return this.body.blocked.down||this.body.touching.down},Player.prototype.jump=function(){this.onGround()&&(this.animations.stop(),this.frameName=this.playerType+"_jump.png",this.body.velocity.y=-500)},Player.prototype.run=function(){this.onGround()&&this.play("runRight")},Player.prototype.hitEnemy=function(){this.animations.stop(),this.frameName=this.playerType+"_hit.png"};var Play=function(){this.player=null,this.ground=null,this.enemies=null};Play.prototype={init:function(){this.game.renderer.renderSession.roundPixels=!0,this.physics.startSystem(Phaser.Physics.ARCADE),this.physics.arcade.gravity.y=800},preload:function(){this.game.load.atlas("sprites","res/sprites.png","res/sprites.json"),this.game.load.image("ground","res/ground_grass.png"),this.game.load.image("background","res/bg_grass.png")},create:function(){this.bg=this.game.add.tileSprite(0,0,480,967,"background"),this.bg.autoScroll(-50,0),this.ground=new Ground(this.game,0,this.game.height-48,480,48),this.player=new Player(this.game,48,this.game.height-108,"sprites","blue"),this.enemies=this.add.group();new Enemy(this.game,this.game.width-48,this.game.height-70,"sprites","mouse",this.enemies);this.game.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACEBAR]);var a=this.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);a.onDown.add(this.player.jump,this.player),this.input.onDown.add(this.player.jump,this.player)},update:function(){this.game.physics.arcade.collide(this.player,this.ground),this.game.physics.arcade.collide(this.enemies,this.ground),this.game.physics.arcade.collide(this.player,this.enemies,this.die,null,this),this.player.run()},die:function(a,b){a.hitEnemy()}};var game=new Phaser.Game(320,480,Phaser.AUTO,"game_cont");game.state.add("play",new Play),game.state.start("play");